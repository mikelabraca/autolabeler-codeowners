{"version":3,"file":"index.js","sources":["../dist-src/get-app-authentication.js","../dist-src/cache.js","../dist-src/to-token-authentication.js","../dist-src/get-installation-authentication.js","../dist-src/get-oauth-authentication.js","../dist-src/auth.js","../dist-src/requires-app-auth.js","../dist-src/hook.js","../dist-src/version.js","../dist-src/index.js"],"sourcesContent":["import { githubAppJwt } from \"universal-github-app-jwt\";\nexport async function getAppAuthentication(id, privateKey) {\n    const appAuthentication = await githubAppJwt({ id, privateKey });\n    return {\n        type: \"app\",\n        token: appAuthentication.token,\n        appId: appAuthentication.appId,\n        expiresAt: new Date(appAuthentication.expiration * 1000).toISOString()\n    };\n}\n","// https://github.com/isaacs/node-lru-cache#readme\nimport LRU from \"lru-cache\";\nexport function getCache() {\n    return new LRU({\n        // cache max. 15000 tokens, that will use less than 10mb memory\n        max: 15000,\n        // Cache for 1 minute less than GitHub expiry\n        maxAge: 1000 * 60 * 59\n    });\n}\nexport async function get(cache, options) {\n    const cacheKey = optionsToCacheKey(options);\n    const result = await cache.get(cacheKey);\n    if (!result) {\n        return;\n    }\n    const [token, expiresAt, repositorySelection, permissionsString, singleFileName] = result.split(\"|\");\n    const permissions = options.permissions ||\n        permissionsString.split(/,/).reduce((permissions, string) => {\n            if (/!$/.test(string)) {\n                permissions[string.slice(0, -1)] = \"write\";\n            }\n            else {\n                permissions[string] = \"read\";\n            }\n            return permissions;\n        }, {});\n    return {\n        token,\n        expiresAt,\n        permissions,\n        repositoryIds: options.repositoryIds,\n        singleFileName,\n        repositorySelection: repositorySelection\n    };\n}\nexport async function set(cache, options, data) {\n    const cacheKey = optionsToCacheKey(options);\n    const permissionsString = options.permissions\n        ? \"\"\n        : Object.keys(data.permissions)\n            .map(name => `${name}${data.permissions[name] === \"write\" ? \"!\" : \"\"}`)\n            .join(\",\");\n    await cache.set(cacheKey, [\n        data.token,\n        data.expiresAt,\n        data.repositorySelection,\n        permissionsString,\n        data.singleFileName\n    ]\n        .join(\"|\")\n        .replace(/\\|+$/, \"\"));\n}\nfunction optionsToCacheKey({ installationId, permissions = {}, repositoryIds = [] }) {\n    const permissionsString = Object.keys(permissions)\n        .sort()\n        .map(name => (permissions[name] === \"read\" ? name : `${name}!`))\n        .join(\",\");\n    const repositoryIdsString = repositoryIds.sort().join(\",\");\n    return [installationId, repositoryIdsString, permissionsString]\n        .filter(Boolean)\n        .join(\"|\");\n}\n","export function toTokenAuthentication({ installationId, token, expiresAt, repositorySelection, permissions, repositoryIds, singleFileName }) {\n    return Object.assign({\n        type: \"token\",\n        tokenType: \"installation\",\n        token,\n        installationId,\n        permissions,\n        expiresAt,\n        repositorySelection\n    }, repositoryIds ? { repositoryIds } : null, singleFileName ? { singleFileName } : null);\n}\n","import { get, set } from \"./cache\";\nimport { getAppAuthentication } from \"./get-app-authentication\";\nimport { toTokenAuthentication } from \"./to-token-authentication\";\nexport async function getInstallationAuthentication(state, options, customRequest) {\n    const installationId = (options.installationId ||\n        state.installationId);\n    if (!options.refresh) {\n        const result = await get(state.cache, options);\n        if (result) {\n            const { token, expiresAt, permissions, repositoryIds, singleFileName, repositorySelection } = result;\n            return toTokenAuthentication({\n                installationId,\n                token,\n                expiresAt,\n                permissions,\n                repositorySelection,\n                repositoryIds,\n                singleFileName\n            });\n        }\n    }\n    const appAuthentication = await getAppAuthentication(state.id, state.privateKey);\n    const request = customRequest || state.request;\n    const { data: { token, expires_at: expiresAt, repositories, permissions, repository_selection: repositorySelection, single_file: singleFileName } } = await request(\"POST /app/installations/:installation_id/access_tokens\", {\n        installation_id: installationId,\n        repository_ids: options.repositoryIds,\n        permissions: options.permissions,\n        mediaType: {\n            previews: [\"machine-man\"]\n        },\n        headers: {\n            authorization: `bearer ${appAuthentication.token}`\n        }\n    });\n    const repositoryIds = repositories\n        ? repositories.map((r) => r.id)\n        : void 0;\n    await set(state.cache, options, {\n        token,\n        expiresAt,\n        repositorySelection,\n        permissions,\n        repositoryIds,\n        singleFileName\n    });\n    return toTokenAuthentication({\n        installationId,\n        token,\n        expiresAt,\n        repositorySelection,\n        permissions,\n        repositoryIds,\n        singleFileName\n    });\n}\n","import { RequestError } from \"@octokit/request-error\";\nexport async function getOAuthAuthentication(state, options, customRequest) {\n    const request = customRequest || state.request;\n    // The \"/login/oauth/access_token\" is not part of the REST API hosted on api.github.com,\n    // instead itâ€™s using the github.com domain.\n    const route = /^https:\\/\\/(api\\.)?github\\.com$/.test(state.request.endpoint.DEFAULTS.baseUrl)\n        ? \"POST https://github.com/login/oauth/access_token\"\n        : `POST ${state.request.endpoint.DEFAULTS.baseUrl.replace(\"/api/v3\", \"/login/oauth/access_token\")}`;\n    const parameters = {\n        headers: {\n            accept: `application/json`\n        },\n        client_id: state.clientId,\n        client_secret: state.clientSecret,\n        code: options.code,\n        state: options.state,\n        redirect_uri: options.redirectUrl\n    };\n    const response = await request(route, parameters);\n    if (response.data.error !== undefined) {\n        throw new RequestError(`${response.data.error_description} (${response.data.error})`, response.status, {\n            headers: response.headers,\n            request: request.endpoint(route, parameters)\n        });\n    }\n    const { data: { access_token: token, scope } } = response;\n    return {\n        type: \"token\",\n        tokenType: \"oauth\",\n        token,\n        scopes: scope.split(/,\\s*/).filter(Boolean)\n    };\n}\n","import { getAppAuthentication } from \"./get-app-authentication\";\nimport { getInstallationAuthentication } from \"./get-installation-authentication\";\nimport { getOAuthAuthentication } from \"./get-oauth-authentication\";\nexport async function auth(state, options) {\n    if (options.type === \"app\") {\n        return getAppAuthentication(state.id, state.privateKey);\n    }\n    if (options.type === \"installation\") {\n        return getInstallationAuthentication(state, options);\n    }\n    return getOAuthAuthentication(state, options);\n}\n","const PATHS = [\n    \"/app\",\n    \"/app/installations\",\n    \"/app/installations/:installation_id\",\n    \"/app/installations/:installation_id\",\n    \"/app/installations/:installation_id/access_tokens\",\n    \"/orgs/:org/installation\",\n    \"/orgs/:org/installation\",\n    \"/repos/:owner/:repo/installation\",\n    \"/repos/:owner/:repo/installation\",\n    \"/users/:username/installation\",\n    \"/users/:username/installation\"\n];\n// CREDIT: Simon Grondin (https://github.com/SGrondin)\n// https://github.com/octokit/plugin-throttling.js/blob/45c5d7f13b8af448a9dbca468d9c9150a73b3948/lib/route-matcher.js\nfunction routeMatcher(paths) {\n    // EXAMPLE. For the following paths:\n    /* [\n        \"/orgs/:org/invitations\",\n        \"/repos/:owner/:repo/collaborators/:username\"\n    ] */\n    const regexes = paths.map(p => p\n        .split(\"/\")\n        .map(c => (c.startsWith(\":\") ? \"(?:.+?)\" : c))\n        .join(\"/\"));\n    // 'regexes' would contain:\n    /* [\n        '/orgs/(?:.+?)/invitations',\n        '/repos/(?:.+?)/(?:.+?)/collaborators/(?:.+?)'\n    ] */\n    const regex = `^(?:${regexes.map(r => `(?:${r})`).join(\"|\")})[^/]*$`;\n    // 'regex' would contain:\n    /*\n      ^(?:(?:\\/orgs\\/(?:.+?)\\/invitations)|(?:\\/repos\\/(?:.+?)\\/(?:.+?)\\/collaborators\\/(?:.+?)))[^\\/]*$\n  \n      It may look scary, but paste it into https://www.debuggex.com/\n      and it will make a lot more sense!\n    */\n    return new RegExp(regex, \"i\");\n}\nconst REGEX = routeMatcher(PATHS);\nexport function requiresAppAuth(url) {\n    return !!url && REGEX.test(url);\n}\n","import { getAppAuthentication } from \"./get-app-authentication\";\nimport { getInstallationAuthentication } from \"./get-installation-authentication\";\nimport { requiresAppAuth } from \"./requires-app-auth\";\nexport async function hook(state, request, route, parameters) {\n    let endpoint = request.endpoint.merge(route, parameters);\n    if (requiresAppAuth(endpoint.url.replace(request.endpoint.DEFAULTS.baseUrl, \"\"))) {\n        const { token } = await getAppAuthentication(state.id, state.privateKey);\n        endpoint.headers.authorization = `bearer ${token}`;\n        return request(endpoint);\n    }\n    const { token } = await getInstallationAuthentication(state, {}, request);\n    endpoint.headers.authorization = `token ${token}`;\n    return request(endpoint);\n}\n","export const VERSION = \"2.4.2\";\n","import { getUserAgent } from \"universal-user-agent\";\nimport { request } from \"@octokit/request\";\nimport { auth } from \"./auth\";\nimport { hook } from \"./hook\";\nimport { getCache } from \"./cache\";\nimport { VERSION } from \"./version\";\nexport const createAppAuth = function createAppAuth(options) {\n    const state = Object.assign({\n        request: request.defaults({\n            headers: {\n                \"user-agent\": `octokit-auth-app.js/${VERSION} ${getUserAgent()}`\n            }\n        }),\n        cache: getCache()\n    }, options);\n    return Object.assign(auth.bind(null, state), {\n        hook: hook.bind(null, state)\n    });\n};\n"],"names":[],"mappings":"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"}