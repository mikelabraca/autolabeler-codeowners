{"version":3,"file":"index.js","sources":["../dist-src/get-token.js","../dist-src/index.js"],"sourcesContent":["import jsonwebtoken from \"jsonwebtoken\";\nexport async function getToken({ privateKey, payload }) {\n    return jsonwebtoken.sign(payload, privateKey, {\n        algorithm: \"RS256\"\n    });\n}\n","import { getToken } from \"./get-token\";\nexport async function githubAppJwt({ id, privateKey }) {\n    // When creating a JSON Web Token, it sets the \"issued at time\" (iat) to 30s\n    // in the past as we have seen people running situations where the GitHub API\n    // claimed the iat would be in future. It turned out the clocks on the\n    // different machine were not in sync.\n    const now = Math.floor(Date.now() / 1000) - 30;\n    const expiration = now + 60 * 10; // JWT expiration time (10 minute maximum)\n    const payload = {\n        iat: now,\n        exp: expiration,\n        iss: id\n    };\n    const token = await getToken({\n        privateKey,\n        payload\n    });\n    return {\n        appId: id,\n        expiration,\n        token\n    };\n}\n"],"names":["getToken","privateKey","payload","jsonwebtoken","sign","algorithm","githubAppJwt","id","now","Math","floor","Date","expiration","iat","exp","iss","token","appId"],"mappings":";;;;;;;;AACO,eAAeA,QAAf,CAAwB;EAAEC,UAAF;EAAcC;CAAtC,EAAiD;SAC7CC,YAAY,CAACC,IAAb,CAAkBF,OAAlB,EAA2BD,UAA3B,EAAuC;IAC1CI,SAAS,EAAE;GADR,CAAP;;;ACDG,eAAeC,YAAf,CAA4B;EAAEC,EAAF;EAAMN;CAAlC,EAAgD;;;;;QAK7CO,GAAG,GAAGC,IAAI,CAACC,KAAL,CAAWC,IAAI,CAACH,GAAL,KAAa,IAAxB,IAAgC,EAA5C;QACMI,UAAU,GAAGJ,GAAG,GAAG,KAAK,EAA9B,CANmD;;QAO7CN,OAAO,GAAG;IACZW,GAAG,EAAEL,GADO;IAEZM,GAAG,EAAEF,UAFO;IAGZG,GAAG,EAAER;GAHT;QAKMS,KAAK,GAAG,MAAMhB,QAAQ,CAAC;IACzBC,UADyB;IAEzBC;GAFwB,CAA5B;SAIO;IACHe,KAAK,EAAEV,EADJ;IAEHK,UAFG;IAGHI;GAHJ;;;;;"}